{% load humanize %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>MAPC's MBTA Budget Calculator</title>
    <meta name="description" content="MAPC's MBTA Budget Calculator">
    <meta name="author" content="MAPC">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="{{ STATIC_URL }}bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="{{ STATIC_URL }}budgetcalc/css/docs.css" rel="stylesheet">

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="{{ STATIC_URL }}budgetcalc/img/favicon.ico">
    <!-- <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png"> -->
  </head>

  <body>
    
    <div class="navbar navbar-fixed-top">
      <div class="mapc-masthead"><div class="container"><img src="{{ STATIC_URL }}budgetcalc/img/mapc-logo.png" alt="Metropolitan Area Planning Council" width="124" height="64" /><img id="mapc-tagline" src="{{ STATIC_URL }}budgetcalc/img/mapc-tagline.png" alt="Metropolitan Area Planning Council" width="475" height="54" /><img src="{{ STATIC_URL }}budgetcalc/img/nu-policy-logo.png" alt="Northeastern University" width="226" height="59" /></div></div>
      <div class="tally">
        <div class="container">
          <div class="row">
            <div class="span8">MBTA Budget Calculator: How Would You Fix the T's Budget?</div>
          </div>
          <div class="row">
            <div class="span4 figure">Budget Deficit: <span class="budget-gap">$ 161,000,000</span></div>
            <div class="span4 figure">You've filled: <span class="budget-filled"></span></div>
          </div>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="row">
         <header class="page-header span8">
           <p class="lead">Please use the options below to fill the <b>$ 161 million MBTA budget gap</b> with revenues and savings.</p>
         </header>
      </div>
      

      {% regroup options by category as category_list %}

      <section class="budget">

      <div class="row">

        <div class="span8">

          <table class="table budget-builder">
            <thead>
              <tr>
                <th></th>
                <th class="impact">Savings or Revenue</th>
                <th class="impact">Ridership impact</th>
              </tr>
            </thead>
            <tbody>
          {% for category in category_list %}
              <tr>
                <td colspan="3" class="category-header"><h1>{{ category.grouper }}<small>{% if category.grouper.cat_type == 'r' %}Revenue{% else %}Savings{% endif %}</small></h1></td>
              </tr>
          {% regroup category.list by optiongroup as optiongroup_list %}
          {% for optiongroup in optiongroup_list %}
              <tr>
                <td colspan="3"><h3>{{ optiongroup.grouper }}{% if optiongroup.grouper.id != 1 %}<a class="clear" name="{{ optiongroup.grouper|slugify }}">&times;</a>{% endif %}</h3></td>
              </tr>

              {% if optiongroup.grouper.id != 1 %}
              {% for option in optiongroup.list %}  
                   
              <tr class="input">
                <td><label class="radio"><input class="budget-change" type="radio" value="{{ option.amount }}" name="{{ optiongroup.grouper|slugify }}" id="option_{{ option.id }}">{{ option.title }}</label></td>
                <td class="impact">$ {{ option.amount|intword }}</td>
                <td class="impact">0</td>
              </tr>

              {% endfor %}
              {% else %}
              {% for option in optiongroup.list %}

              <tr class="input">
                <td><label class="checkbox"><input class="budget-change" type="checkbox" value="{{ option.amount }}" id="option_{{ option.id }}">{{ option.title }}</label></td>
                <td class="impact">$ {{ option.amount|intword }}</td>
                <td class="impact">0</td>
              </tr>


              {% endfor %}
              {% endif %}
          {% endfor %}
          {% endfor %}

              
            

            </tbody>
          </table>

        </div> <!-- /table -->

      </div> <!-- /row -->
      </section>

      <section>
      <div class="row">
        <div class="span8">
          <div id="error-nobudget" class="alert alert-block alert-error fade in">
            <a class="close" href="#">&times;</a>
            <h4 class="alert-heading">Error: Empty budget.</h4>
            <p>Please adjust your budget before you submit your proposal.</p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="span8">
          <div id="error-noemail" class="alert alert-block alert-error fade in">
            <a class="close" href="#">&times;</a>
            <h4 class="alert-heading">Error: Email is not valid.</h4>
            <p>Please enter a valid email address. We won't share your personal information. Unique email addresses help us to improve our results.</p>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="span8">
          <form id="budget-form" action="{% url budgetcalc-index %}">
            <div class="form-actions">
              <p class="lead">Submit your budget proposal and see aggregated results from other users.</p>
              {% csrf_token %}
              <div class="input-prepend">
                <span class="add-on"><i class="icon-envelope"></i></span>
                <input type="text" class="input-xlarge" placeholder="Your Email (required) ..." id="email"></div>
              <div>
              <button id="budget-btn" class="btn btn-large btn-primary" href="#">Submit</button></div>
            </div>
          </form>
        </div>
      </div>

      </section>

      <footer class="footer">
        <p>&copy; 2012 <a href="http://mapc.org" title="Metropolitan Area Planning Council">MAPC</a></p>
      </footer>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="{{ STATIC_URL }}jquery-1.7.1.min.js"></script>
    <script src="{{ STATIC_URL }}bootstrap/js/bootstrap.js"></script>
    <script src="{{ STATIC_URL }}budgetcalc/js/application.js"></script>
  </body>
</html>
